<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordGriddle</title>
    <link rel="stylesheet" href="style.css">

    <script>
        const buttons = {
            button0: { fileUrl: "puzzle-0" },
            button1: { fileUrl: "puzzle-1" },
            button2: { fileUrl: "puzzle-2" },
            button3: { fileUrl: "puzzle-3" }
        };

        function parseDate(dateString) {
            if (!dateString) {
                return "";
            }
            const [year, month, day] = dateString.split('-');
            return new Date(year, month - 1, day);
        }

        document.addEventListener('DOMContentLoaded', function () {
            fetch('/puzzles/catalog.json')
                .then(response => response.json())
                .then(data => {
                    console.log(`${data.puzzles.length}`);

                    const puzzleListElement = document.getElementById('puzzle-list');
                    data.puzzles.forEach(puzzle => {
                        console.log(`${puzzle.title}, ${parseDate(puzzle.launchDate)}`);

                        const puzzleSelector = document.createElement('button');
                        puzzleSelector.classList.add('button');
                        puzzleSelector.setAttribute('type', 'button');
                        puzzleSelector.textContent = puzzle.title;
                        puzzleSelector.addEventListener('click', function () {
                            window.location.href = `puzzle.html?puzzle=${encodeURIComponent(puzzle.name)}`;
                        });

                        puzzleListElement.appendChild(puzzleSelector);
                    });
                });
        });
    </script>
</head>

<body>
    Select a puzzle:<br />
    <div id="puzzle-list"></div>
</body>

</html>